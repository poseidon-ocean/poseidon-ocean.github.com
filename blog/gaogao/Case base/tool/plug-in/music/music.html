<!doctype html>
<html>
 <head>
  <!--声明当前前页面的编码集：charset-gbk gb2312（中文编码） UTF-8国际编码-->
  <!--当前页面三要素-->
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>音乐播放器插件</title>
	<!--css 叠层样式-->
	<style type="text/css">
	*{margin:0;padding:0;}
	body{font-size:12px;font-family:"微软雅黑";color:#666;background:url("images/bg.jpg")no-repeat top center;background-size:cover;}
    .music{width:360px;height:470px;box-shadow:0 0 5px #251C1C;}
   .music h2{color:#3399ff;line-height:60px;text-align:center;font-weight:900;font-size:30px;background:#8E91BB;color:#1264B9;border-radius:4px 4px 0 0;}
   .music .m_con{width:360px;height:390px;background:url("images/dtt.jpg")no-repeat top center;background-size:cover;overflow:auto;padding-top:20px;}
   .tz_time{line-height:40px;font-size:18px;padding-left:15px;}


    ::-webkit-scrollbar{width:10px;height:6px;background:#ccc;}
	::-webkit-scrollbar-button{background-color:#e5e5e5;}
	::-webkit-scrollbar-track{background:#999;}
	::-webkit-scrollbar-track-piece{background:#ccc}
	::-webkit-scrollbar-thumb{background:#666;}
	::-webkit-scrollbar-corner{background:#82AFFF;}
	::-webkit-scrollbar-resizer{background:#FF0BEE;}
	scrollbar{-moz-appearance:none !important;background:rgb(0,255,0) !important;}
	scrollbarbutton{-moz-appearance:none !important;background-color:rgb(0,0,255) !important;}
	scrollbarbutton:hover{-moz-appearance:none !important;background-color:rgb(255,0,0) !important;}

    .sel{color:#5580ff;font-size:30px;font-weight:900;}
  
 #lrc{display:none;}
	</style>
 </head>
 <body>
    

	<div class="music">
	    <h2>追梦赤子心</h2>
		<div class="m_con">
		    
		</div>
	</div>
<!--歌词-->
<textarea cols="50" rows="8" id="lrc">
	[ti:追梦赤子心]
	[ar:GALA]
	[al:追梦痴子心]
	[offset:0]

	[00:00.00]GALA---追梦赤子心
	[00:04.57]
	[00:15.33]充满鲜花的世界到底在哪里
	[00:21.31]如果它真的存在那么我一定会去
	[00:28.76]我想在那里最高的山峰矗立
	[00:34.18]不在乎它是不是悬崖峭壁
	[00:38.87]
	[00:42.01]用力活着用力爱哪怕肝脑涂地
	[00:47.83]不求任何人满意只要对得起自己
	[00:55.20]关于理想我从来没选择放弃
	[01:00.66]即使在灰头土脸的日子里
	[01:06.44]
	[01:07.39]也许我没有天分
	[01:10.60]但我有梦的天真
	[01:13.90]我将会去证明用我的一生
	[01:20.64]也许我手比脚笨
	[01:23.85]但我愿不停探寻
	[01:27.26]付出所有的青春不留遗憾
	[01:32.69]
	[01:34.61]向前跑 迎着冷眼和嘲笑
	[01:40.16]生命的广阔不历经磨难怎能感到
	[01:47.13]命运它无法让我们跪地求饶
	[01:54.71]就算鲜血洒满了怀抱
	[01:59.62]
	[02:00.98]继续跑 带着赤子的骄傲
	[02:07.69]生命的闪耀不坚持到底怎能看到
	[02:14.02]与其苟延残喘不如纵情燃烧吧
	[02:22.16]有一天会再发芽
	[02:29.03]
	[02:55.66]未来迷人绚烂总在向我召唤
	[03:00.58]哪怕只有痛苦作伴也要勇往直前
	[03:08.47]我想在那里最蓝的大海扬帆
	[03:14.18]绝不管自己能不能回还
	[03:19.62]
	[03:20.99]失败后郁郁寡欢
	[03:23.86]那是懦夫的表现
	[03:27.29]只要一息尚存请握紧双拳
	[03:34.11]在天色破晓之前
	[03:37.27]我们要更加勇敢
	[03:40.74]等待日出时最耀眼的瞬间
	[03:46.07]
	[03:47.77]向前跑 迎着冷眼和嘲笑
	[03:54.10]生命的广阔不历经磨难怎能感到
	[04:01.11]命运它无法让我们跪地求饶
	[04:08.03]就算鲜血洒满了怀抱
	[04:12.44]
	[04:14.31]继续跑 带着赤子的骄傲
	[04:20.92]生命的闪耀不坚持到底怎能看到
	[04:27.37]与其苟延残喘不如纵情燃烧
	[04:35.17]为了心中的美好
	[04:42.18]不妥协直到变老
	[04:48.66]
</textarea>

    <script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
	<script type="text/javascript">
	$(function(){
	   //创建一个mp3的播放器
	   var audioDom = document.createElement("audio");//audio  音频的意思
	   //设置播放器地址
	audioDom.src = "mp3/1.mp3";          
	   //控制自动播放
    audioDom.autoplay = "autoplay";
       
	  //获取textarea的歌词
	  var lrc = $("#lrc").val();
	  
	  //把歌词时间和歌词分离开
      var lrcArr = lrc.split("[");

      var html = "";

	  for (var i = 0;i < lrcArr.length ; i++)
	  {//第二次分割
	   var arr = lrcArr[i].split("]");
	   console.log("====="+arr);
	   //取到时间
	   var timer = arr[0].split(".");
	   //取到歌词
	   var message = arr[1];
	   //取到分钟和秒
	   var stime = timer[0].split(":");
	   //转换成秒数
	   var s = stime[0]*60 + stime[1]*1;
	   if (message)
	   {html +="<div class='tz_time' id='"+s+"'>"+message+"</div>";
	   }
	  }

	
	  //把解析好的歌词放入div中
	  $(".m_con").html(html);

	  //当音乐播放的时候，调用timeupdate,时间发生变化会一直调用
	  audioDom.addEventListener("timeupdate",function(){
	      //获取档期播放时间
		  var timer = this.currentTime;
		  //通过时间来驱动歌词
		  var s = parseInt(timer);
          for (var i = 0;i < s ;i++ )
          {$("#" + i).addClass("sel").siblings().removeClass("sel");
          }
	  });
	});
	</script>
 </body>
</html>

