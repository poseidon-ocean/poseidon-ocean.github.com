<!doctype html>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>桌面机系统</title>


	<style type="text/css">
 *{padding:0;margin:0;}
 body{background:url("images/bg.jpg")no-repeat top            center;background-size:cover;font-size:12px;font-family:"微软雅黑";color:#666;}
 .menu{width:200px;background:#fff;box-shadow:0 0 25px 0 #fff;display:none;position:absolute;left:0;top:0;z-index:99;}
 .menu ul li{list-style:none;border-bottom:1px solid #eee;line-height:30px;font-size:14px;padding-left:20px;}
 .menu ul li:hover{background:#6e6e6e;color:#fff;}

 #test{font-size:30px;color:#fff;display:none;}

 .signbox{position:relative;z-index:1;}
 .signbox .s_list{width:294px;height:310px;position:absolute;}
 .signbox .s_list .s_content{width:256px;height:220px;position:absolute;top:60px;left:16px;outline:none;font-size:18px;text-overflow: ellipsis;overflow: hidden;}
 .timer{position:absolute;bottom:10px;right:30px;font-size:14px;}
	</style>
	<link rel="stylesheet" type="text/css" href="css/sg.css"></link>

	<link rel="stylesheet" type="text/css" href="css/animate.css"></link>
 </head>
 <body>
<!--S menu-->
  <div class="menu">
      <ul> 
	      <li onclick="m_menu(1);">打开</li>
		  <li onclick="m_menu(2);">新建文件</li>
		  <li onclick="m_menu(3);">新建文件夹</li>
		  <li onclick="m_menu(4);">添加便签</li>
		  <li onclick="m_menu(5);">清除便签</li>
		  <li onclick="m_menu(6);">添加music应用</li>
		  <li onclick="m_menu(7);">添加计算器</li>
		  <li onclick="m_menu(8);">腾讯mini弹窗</li>
		  <li onclick="m_menu(9);">注销</li>
	  </ul>
  </div>
<!--menu E-->
<div class="signbox"></div>
<p id="test"></p>



<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
<script type="text/javascript" src="js/sg.js"></script>
<script type="text/javascript" src="js/sgutil.js"></script>
<script type="text/javascript">
	//屏蔽右键
    document.oncontextmenu= function(){
	   return false;
	};
    //获取右键的 值
	$(document).mousedown(function(e){
	   var key= e.which;//      右键3.左键1.滚轮2
	   if (key == 3)
	   {
		   var x = e.clientX;//右键点击时X坐标
		   var y = e.clientY;//右键点击时Y坐标
		  // $("#test").html("X ="+x+", Y ="+y);
		   $(".menu").css({left:x,top:y}).show();
	   }
	});
     //点击空白区域隐藏右键菜单
     $(document).click(function(){
	    $(".menu").hide();
	 });

     //右键菜单信息
	 function m_menu(flag){
	    if (flag == 1)
	    {
	    }else if (flag == 2)
	    {	
	    }else if (flag == 3)
	    {
	    }else if (flag == 4)
	    {  tz_bq();
	    }else if (flag == 5)
	    {  tz_Eliminate();
	    }else if (flag == 6)
	    {  tz_music();
	    }else if (flag == 7)
	    {  tz_cac();
	    }else if (flag == 8)
	    {  tz_mini();
	    }else if (flag == 9)
	    {
	    }
	 };


  //音乐插件
   function tz_music(){
	   
	   //open:"left/top/slide(默认)/other(从小变大)/fade(淡入淡出)";music出来方式
       $.tmDialog.iframe({open:"left",content:"系统插件/music/music.html",title:"music平台",width:360,height:470,showBottom:false});
   };
   
   //mini弹窗
   function tz_mini(){
      $.tmDialog.iframe({open:"other",content:"http://mini.qq.com/",title:"腾讯mini信息窗口",width:760,height:650,showBottom:false});
   };

   //计算机弹窗
   function tz_cac(){
      $.tmDialog.iframe({open:"top",content:"系统插件/cac/cac.html",title:"桌面应用计算器",width:860,height:600,showBottom:false});
   };

    //添加便签
	function tz_bq(){	
		
			// 获取当前鼠标右键的位置
			var left = $(".menu").offset().left;
			var top = $(".menu").offset().top;

			// 生成1到3的随机数
			var random = Math.floor(Math.random() * 3) + 1;
			$(".signbox")
			.append(
			"<div class='s_list animated rollIn' style='left:"+left+"px;top:"+top+"px;'>"+
						"<img src='images/"+random+".png' alt='便签' width='294' height='310' />"+
						"<div class='s_content' contenteditable = 'true'></div>"+
						"<p class='timer'><span>3</span>秒后自动保存</p>"+
					"</div>");
			auto_timer();
	};

	// 清空标签
	function tz_Eliminate(){
	   $(".s_list").removeClass("animated rollIn").addClass("animated bounceOut").fadeOut(1000);
			// 清空缓存
			localStorage.removeItem("my_label_Arry");
	}
		

	// 自动保存时间
	var timer = null;
	function auto_timer(){
		clearInterval(timer);
		var count = 3;
		timer = setInterval(function(){
			if(count <= 0){
				count = 3;
				// 保存内容
				localStorage.setItem("my_label_Arry",$(".signbox").html());
			}
			$(".timer").find("span").text(count);
			count--;
		},1000);
	}

	// 页面加载时就运行
	$(function(){
		// 读取缓存信息
		var my_label_Arry = localStorage.getItem("my_label_Arry");
		if(my_label_Arry){
			$(".signbox").html(my_label_Arry);
			auto_timer();
		}
	
	});
	
	</script>
 </body>
</html>
