<!doctype html>
<html>
 <head>
  <!--声明当前前页面的编码集：charset-gbk gb2312（中文编码） UTF-8国际编码-->
  <!--当前页面三要素-->
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title></title>
	<!--css 叠层样式-->
	<style type="text/css">
	*{margin:0;padding:0;}
	body,html{background:url("images/bg.jpg") no-repeat top center;background-size:cover;font-size:12px;color:#666;font-family:"微软雅黑";overflow:hidden;}
	/*S  dm*/
	.dm{width:100%;height:100%;position:absolute;top:0;left:0;background-color:rgba(0,0,0,.3);display:none;}
	.dm .d_screen{width:100%;height:100%;position:absolute;top:0;left:0;}
	.btn{line-height:60px;display:block;text-align:center;border-radius:50%;transition:all .5s ease;text-decoration:none;font-size:14px;font-weight:900;}
	.no{border:3px solid #3cf;width:60px;height:60px;color:#3cf;}
	.off{width:60px;height:60px;position:absolute;right:0;top:0;border:3px solid red;color:red;z-index:2;} 
	.no:hover{background-color:#3cf;color:#fff;border:3px solid #fff;transform:scale(.9) rotate(360deg) ;}
	.off:hover{background-color:red;color:#fff;border:3px solid red;transform:scale(.9) rotate(360deg) ;}
	.dm .d_screen .d_yy{width:100%;height:100%;background:#000;position:absolute;top:0;left:0;opacity:.8;filter:alpha(opacity=80);}
	.dm .d_screen .d_show{position:relative;z-index:3;}
	.dm .d_screen .d_show div{font-size:30px;color:#3ff;position:absolute;top:0;left:0;display:none;word-spacing:nowrap;}
	.dm .d_send{width:100%;height:76px;position:absolute;bottom:0;left:0;z-index:2;}
	.dm .d_send .d_filter{width:100%;height:100%;background:#000;position:absolute;bottom:0;left:0;opacity:.8;filter:alpha(opacity=80);}
	.dm .d_send .d_con{width:100%;height:100%;position:absolute;bottom:0;left:0;line-height:76px;text-align:center;}
	.dm .d_send .d_con .d_text{width:595px;height:37px;outline:none;border:0;border-radius:32px 0 0 32px;padding-left:10px;font-size:14px;}
	.dm .d_send .d_con .d_btn{width:100px;height:37px;background:#3ff;color:#Fff;border:0;font-size:14px;border-radius:0 32px 32px 0;outline:none;}
	.dm .d_send .d_con .d_btn:hover{background:#09f;cursor:pointer}
	/*E  dm*/
	/*第一次自己做的动画*/
	.meone{animation-name:meone;}
	@keyframes meone{
		0%{opacity:0;transform:translateX(-900%);}
		20%,50%,80%,90%{opacity:1;transform:scale(2) translateX(-100%);}
		10%,30%,60%,100%{opacity:1;transform:scale(1) translateX(0);}
	}
	</style>
	<link type="text/css" rel="stylesheet" href="css/tz.css"></link>
 </head>
 <body>
	<!--弹幕技术1.07分钟继续-->
	<a href="#" class="btn no">打开弹幕</a>
	<!--S dm-->
	<div class="dm">
		<div class="d_screen">
			<a href="#" class="btn off">关闭</a>
			<div class="d_yy"></div>
			<div class="d_show">
				<div>能看到我的人真的太帅了</div>
				<div>付出不亚于任何人的努力</div>
				<div>人生·工作的结果=思维方式×热情×能力</div>
				<div>Arry老师太帅了！！</div>
				<div>卧槽。。这么叼。。。。</div>	
			</div>
		</div>

		<div class="d_send">
			<div class="d_filter"></div>
			<div class="d_con">
				<input type="text" class="d_text"/><input type="button" value="发布评论" class="d_btn">
			</div>
		</div>	
	</div>
	<!--E dm-->

    <script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
	<script type="text/javascript">
		$(function(){
			init_screen();

			$(".off,.no").click(function(){
				$(".dm").toggle("slow");
			});
		
			//发表评论
			$(".d_btn").click(function(){
				var text = $(".d_text").val();
				var tx = new Array(3);
				tx[0]="perspectiveRightRetourn";
				tx[1]="tinLeftIn";
				tx[2]="foolishIn";
				tx[3]="tinUpIn";
				tx[4]="meone";
				tx[5]="openUpLeftRetourn";
				//随机动画
				var num = Math.round(Math.random()*5);
				var msg = "<div class='magictime "+tx[num]+"'>"+text+"</div>";
				$(".d_show").append(msg);
				init_screen();
			});

			//初始化弹幕
			function init_screen(){
				var _top = 0;
				$(".d_show").find("div").show().each(function(){
					//div距离左边的宽度
					var _left = $(window).width() - $(this).width();
					var _height = $(window).height();//浏览器最大高度
					//每行之间的间隔
					_top = _top + 76;
					if(_top >= _height - 100){
						_top = 0;
						}

					//设置初始化位置
					$(this).css({left:_left,top:_top,color:Color()});
					
					var time = 16000;
					if($(this).index() % 2 == 0){
						time = 14000;
					}

					//动画执行
					$(this).animate({left:"-"+_left+"px"},time,function(){$(this).remove();
					
					});
				});
			}
		});
		
		//获取随机颜色值
		function Color(){
			return '#' + (function(h){
				return new Array(7 - h.length).join("0") + h
			})((Math.random() * 0x1000000 << 0).toString(16))
		}	


	
	</script>
 </body>
</html>

