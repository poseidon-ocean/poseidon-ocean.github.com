<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>模板</title>
	<meta name="Keywords" content="关键词1,关键词2">
    <meta name="description" content="网页的描述内容">
	<!--响应式mate标签-->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link href="css/reset.css" rel="stylesheet" />
    </head>
   <body>



   <input type="file" name="test" id="file">
   <button name="change" onclick="btn_file();">提交</button>
	<script src="http://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>
	<script type="text/javascript">


		function proDownImage(path,imgObj) { // 等比压缩图片工具
			//var proMaxHeight = 185;
			var proMaxHeight=300;
			var proMaxWidth = 175;
			var size = new Object();
			var image = new Image();
			image.src = path;
			image.attachEvent("onreadystatechange",
					function() { // 当加载状态改变时执行此方法,因为img的加载有延迟
						if (image.readyState == "complete") { // 当加载状态为完全结束时进入
							if (image.width > 0 && image.height > 0) {
								var ww = proMaxWidth / image.width;
								var hh = proMaxHeight / image.height;
								var rate = (ww < hh) ? ww: hh;
								if (rate <= 1) {
									alert("imgage width*rate is:" + image.width * rate);
									size.width = image.width * rate;
									size.height = image.height * rate;
								} else {
									alert("imgage width is:" + image.width);
									size.width = image.width;
									size.height = image.height;
								}
							}
						}
						imgObj.attr("width",size.width);
						imgObj.attr("height",size.height);
					});
		}

		//获取文件名称
		function getFileName(path){
			var pos1 = path.lastIndexOf('/');
			var pos2 = path.lastIndexOf('\\');
			var pos  = Math.max(pos1, pos2)
			if( pos<0 )
				return path;
			else
				return path.substring(pos+1);
		}

		function btn_file(){
			var path = document.getElementById("file").value;
			//console.log(getFileName(path));

			proDownImage(getFileName(path));
		}
	</script>
   </body>


</html>
